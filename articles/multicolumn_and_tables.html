<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Robust Multi-Column and Table Workflows • pdfsearch</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Robust Multi-Column and Table Workflows">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-T9Z68BV7P4"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-T9Z68BV7P4');
</script>
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">pdfsearch</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.5.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/intro_to_pdfsearch.html">Getting Started with pdfsearch</a>
    </li>
    <li>
      <a href="../articles/multicolumn_and_tables.html">Robust Multi-Column and Table Workflows</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/lebebr01/pdfsearch/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Robust Multi-Column and Table Workflows</h1>
                        <h4 data-toc-skip class="author">Brandon
LeBeau</h4>
            
            <h4 data-toc-skip class="date">2026-02-18</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/lebebr01/pdfsearch/blob/main/vignettes/multicolumn_and_tables.Rmd" class="external-link"><code>vignettes/multicolumn_and_tables.Rmd</code></a></small>
      <div class="hidden name"><code>multicolumn_and_tables.Rmd</code></div>

    </div>

    
    
<p>This vignette demonstrates newer <code>pdfsearch</code> workflows
for:</p>
<ol style="list-style-type: decimal">
<li>Multi-column reconstruction with coordinate-aware ordering.</li>
<li>Cleaning recurring headers, section headings, captions, and other
non-body text.</li>
<li>Controlling table behavior in <code><a href="../reference/keyword_search.html">keyword_search()</a></code>.</li>
<li>Extracting tables with richer metadata from
<code><a href="../reference/extract_tables.html">extract_tables()</a></code>.</li>
</ol>
<div class="section level2">
<h2 id="data">Data<a class="anchor" aria-label="anchor" href="#data"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/lebebr01/pdfsearch" class="external-link">pdfsearch</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"pdf"</span>, <span class="st">"LeBeauetal2020-gcq.pdf"</span>, package <span class="op">=</span> <span class="st">"pdfsearch"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="coordinate-based-column-rectification">Coordinate-Based Column Rectification<a class="anchor" aria-label="anchor" href="#coordinate-based-column-rectification"></a>
</h2>
<p>The <code>split_method = "coordinates"</code> option uses token
coordinates from <code><a href="https://docs.ropensci.org/pdftools//reference/pdftools.html" class="external-link">pdftools::pdf_data()</a></code> and can be more
robust than whitespace-only splitting.</p>
<p>Use <code>column_count</code> to control how column order is
handled:</p>
<ul>
<li>
<code>"auto"</code>: infer number of columns.</li>
<li>
<code>"1"</code>: force single-column reading order.</li>
<li>
<code>"2"</code>: force left-column then right-column order.</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res_coord</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/keyword_search.html">keyword_search</a></span><span class="op">(</span></span>
<span>  <span class="va">file</span>,</span>
<span>  keyword <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"test theory"</span>, <span class="st">"above-level"</span><span class="op">)</span>,</span>
<span>  path <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  split_pdf <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  split_method <span class="op">=</span> <span class="st">"coordinates"</span>,</span>
<span>  column_count <span class="op">=</span> <span class="st">"2"</span>,</span>
<span>  remove_hyphen <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">res_coord</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 5</span></span></span>
<span><span class="co">#&gt;   keyword     page_num line_num line_text token_text</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> test theory        1        2 <span style="color: #949494;">&lt;chr [1]&gt;</span> <span style="color: #949494;">&lt;list [1]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> test theory        3       53 <span style="color: #949494;">&lt;chr [1]&gt;</span> <span style="color: #949494;">&lt;list [1]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> test theory        9      247 <span style="color: #949494;">&lt;chr [1]&gt;</span> <span style="color: #949494;">&lt;list [1]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> test theory       14      353 <span style="color: #949494;">&lt;chr [1]&gt;</span> <span style="color: #949494;">&lt;list [1]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> test theory       17      502 <span style="color: #949494;">&lt;chr [1]&gt;</span> <span style="color: #949494;">&lt;list [1]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> above-level        1       12 <span style="color: #949494;">&lt;chr [1]&gt;</span> <span style="color: #949494;">&lt;list [1]&gt;</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="cleaning-page-artifacts-and-section-headings">Cleaning Page Artifacts and Section Headings<a class="anchor" aria-label="anchor" href="#cleaning-page-artifacts-and-section-headings"></a>
</h2>
<p>Several options are available to reduce non-body text before keyword
searching. This includes page headers, footers, section headings,
repeated furniture, and captions. These can be particularly helpful for
multi-column documents where such elements may be more prevalent. The
goal of removing these is to better align column text and keep the
sentence structure and keyword proximity intact.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res_clean</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/keyword_search.html">keyword_search</a></span><span class="op">(</span></span>
<span>  <span class="va">file</span>,</span>
<span>  keyword <span class="op">=</span> <span class="st">"variance"</span>,</span>
<span>  path <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  split_pdf <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  split_method <span class="op">=</span> <span class="st">"coordinates"</span>,</span>
<span>  column_count <span class="op">=</span> <span class="st">"2"</span>,</span>
<span>  remove_section_headers <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  remove_page_headers <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  remove_page_footers <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  remove_repeated_furniture <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  repeated_edge_n <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  repeated_edge_min_pages <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  remove_captions <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  caption_continuation_max <span class="op">=</span> <span class="fl">2</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">res_clean</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 5</span></span></span>
<span><span class="co">#&gt;   keyword  page_num line_num line_text token_text</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> variance        4       85 <span style="color: #949494;">&lt;chr [1]&gt;</span> <span style="color: #949494;">&lt;list [1]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> variance        4       87 <span style="color: #949494;">&lt;chr [1]&gt;</span> <span style="color: #949494;">&lt;list [1]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> variance        4       89 <span style="color: #949494;">&lt;chr [1]&gt;</span> <span style="color: #949494;">&lt;list [1]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> variance        7      185 <span style="color: #949494;">&lt;chr [1]&gt;</span> <span style="color: #949494;">&lt;list [1]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> variance       17      467 <span style="color: #949494;">&lt;chr [1]&gt;</span> <span style="color: #949494;">&lt;list [1]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> variance       18      618 <span style="color: #949494;">&lt;chr [1]&gt;</span> <span style="color: #949494;">&lt;list [1]&gt;</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="table-control-in-keyword_search">Table Control in <code>keyword_search()</code><a class="anchor" aria-label="anchor" href="#table-control-in-keyword_search"></a>
</h2>
<p>Use <code>table_mode</code> to choose whether table-like blocks are
searched:</p>
<ul>
<li>
<code>"keep"</code>: include all text (default).</li>
<li>
<code>"remove"</code>: exclude table-like blocks from search.</li>
<li>
<code>"only"</code>: search only table-like blocks.</li>
</ul>
<p>Additional options can improve table-only extraction:</p>
<ul>
<li>
<code>table_include_headers</code>: include nearby table header rows
(default <code>TRUE</code>).</li>
<li>
<code>table_header_lookback</code>: number of lines above detected
table blocks to inspect for header rows (default <code>3</code>).</li>
<li>
<code>table_include_notes</code>: include trailing note/source
rows.</li>
<li>
<code>table_note_lookahead</code>: number of lines after detected
blocks to inspect for notes.</li>
<li>
<code>table_block_max_gap</code>: maximum number of non-table lines
allowed before a block is split. Increase this when tables are
fragmented.</li>
</ul>
<p>When specifying <code>table_mode = 'remove'</code>, the same cleaning
options above are applied to table blocks as well, which can help ensure
that only body text is retained for keyword searching. When using
<code>table_mode = 'only'</code>, the cleaning options are not applied
since the focus is on analyzing tables specifically.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res_keep</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/keyword_search.html">keyword_search</a></span><span class="op">(</span></span>
<span>  <span class="va">file</span>,</span>
<span>  keyword <span class="op">=</span> <span class="st">"0.83"</span>,</span>
<span>  path <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  split_pdf <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  split_method <span class="op">=</span> <span class="st">"coordinates"</span>,</span>
<span>  table_mode <span class="op">=</span> <span class="st">"keep"</span>,</span>
<span>  convert_sentence <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">res_remove</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/keyword_search.html">keyword_search</a></span><span class="op">(</span></span>
<span>  <span class="va">file</span>,</span>
<span>  keyword <span class="op">=</span> <span class="st">"0.83"</span>,</span>
<span>  path <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  split_pdf <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  split_method <span class="op">=</span> <span class="st">"coordinates"</span>,</span>
<span>  table_mode <span class="op">=</span> <span class="st">"remove"</span>,</span>
<span>  convert_sentence <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">res_only</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/keyword_search.html">keyword_search</a></span><span class="op">(</span></span>
<span>  <span class="va">file</span>,</span>
<span>  keyword <span class="op">=</span> <span class="st">"0.83"</span>,</span>
<span>  path <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  split_pdf <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  split_method <span class="op">=</span> <span class="st">"coordinates"</span>,</span>
<span>  table_mode <span class="op">=</span> <span class="st">"only"</span>,</span>
<span>  table_include_headers <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  table_header_lookback <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  table_block_max_gap <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  table_include_notes <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  table_note_lookahead <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  convert_sentence <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  keep <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">res_keep</span><span class="op">)</span>,</span>
<span>  remove <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">res_remove</span><span class="op">)</span>,</span>
<span>  only <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">res_only</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt;   keep remove   only </span></span>
<span><span class="co">#&gt;      4      2      2</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="enhanced-extract_tables">Enhanced <code>extract_tables()</code><a class="anchor" aria-label="anchor" href="#enhanced-extract_tables"></a>
</h2>
<p><code><a href="../reference/extract_tables.html">extract_tables()</a></code> now supports coordinate splitting and
output modes:</p>
<ul>
<li>
<code>"parsed"</code>: list of parsed table data frames.</li>
<li>
<code>"blocks"</code>: metadata plus raw block lines.</li>
<li>
<code>"both"</code>: both parsed tables and block metadata.</li>
</ul>
<p>It also supports table-block tuning options:</p>
<ul>
<li>
<code>table_include_headers</code>,
<code>table_header_lookback</code>
</li>
<li>
<code>table_include_notes</code>,
<code>table_note_lookahead</code>
</li>
<li>
<code>table_min_numeric_tokens</code>,
<code>table_min_digit_ratio</code>, <code>table_min_block_lines</code>,
and <code>table_block_max_gap</code>
</li>
<li>
<code>merge_across_pages</code> for continuation tables that span
adjacent pages</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tab_blocks</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/extract_tables.html">extract_tables</a></span><span class="op">(</span></span>
<span>  <span class="va">file</span>,</span>
<span>  path <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  split_pdf <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  split_method <span class="op">=</span> <span class="st">"coordinates"</span>,</span>
<span>  column_count <span class="op">=</span> <span class="st">"2"</span>,</span>
<span>  remove_section_headers <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  remove_page_headers <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  remove_page_footers <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  remove_repeated_furniture <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  remove_captions <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  table_include_headers <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  table_header_lookback <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  table_block_max_gap <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  table_include_notes <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  table_note_lookahead <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  merge_across_pages <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  output <span class="op">=</span> <span class="st">"blocks"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">tab_blocks</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 6</span></span></span>
<span><span class="co">#&gt;   page_num block_id line_start line_end line_text  page_end</span></span>
<span><span class="co">#&gt;      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>        8        1          1       10 <span style="color: #949494;">&lt;chr [10]&gt;</span>        8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>        9        1          1       16 <span style="color: #949494;">&lt;chr [35]&gt;</span>       10</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>       14        1          1       29 <span style="color: #949494;">&lt;chr [29]&gt;</span>       14</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tab_parsed</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/extract_tables.html">extract_tables</a></span><span class="op">(</span></span>
<span>  <span class="va">file</span>,</span>
<span>  path <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  split_pdf <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  split_method <span class="op">=</span> <span class="st">"coordinates"</span>,</span>
<span>  column_count <span class="op">=</span> <span class="st">"1"</span>,</span>
<span>  remove_section_headers <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  remove_page_headers <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  remove_page_footers <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  remove_repeated_furniture <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  remove_captions <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  table_include_headers <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  table_header_lookback <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  table_block_max_gap <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  table_include_notes <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  table_note_lookahead <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  merge_across_pages <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  output <span class="op">=</span> <span class="st">"parsed"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">tab_parsed</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 3</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">tab_parsed</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">tab_parsed</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 1</span></span></span>
<span><span class="co">#&gt;   X1                                                                            </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                                                         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Table 1. Fit Statistics for Two-Parameter IRT Multigroup Models by Subject.   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Subject M 2 RMSEA [CI] CFI M 2 RMSEA [CI] CFI                                 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> English 3930 (2340), p &lt; .01 0.019 [0.018, 0.020] 0.893 2320 (740), p &lt; .01 0…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Math 1630 (1283), p &lt; .01 0.012 [0.010, 0.014] 0.949 805 (405), p &lt; .01 0.023…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Reading 1895 (1307), p &lt; .01 0.015 [0.014, 0.017] 0.965 902 (405), p &lt; .01 0.…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> Science 1818 (1146), p &lt; .01 0.018 [0.016, 0.019] 0.936 948 (350), p &lt; .01 0.…</span></span></code></pre></div>
<div class="section level3">
<h3 id="table-block-tuning-reference">Table-Block Tuning Reference<a class="anchor" aria-label="anchor" href="#table-block-tuning-reference"></a>
</h3>
<p>One primary element to test is the number of columns from the PDF. If
the tables span multiple columns, but the text is in multiple columns
you would want to ensure <code>column_count = 1</code> is specified when
extracting the tables. This will ensure the table is not truncated to
only include half of the table.</p>
<p>The table detector is controlled by several additional options that
can be tuned for better performance on specific documents. The key
parameters are:</p>
<ul>
<li>
<code>table_min_numeric_tokens</code>: minimum number of
numeric-looking tokens required for a line to be considered table-like.
Larger values are stricter.</li>
<li>
<code>table_min_digit_ratio</code>: minimum proportion of digit
characters in a line for table-like classification. Larger values reduce
prose false positives.</li>
<li>
<code>table_min_block_lines</code>: minimum number of adjacent
table-like lines needed to keep a block.</li>
<li>
<code>table_block_max_gap</code>: maximum number of non-table lines
allowed between table-like lines when merging a block. Increase this
when tables are split.</li>
<li>
<code>table_include_headers</code>: include nearby table headers and
column-label rows.</li>
<li>
<code>table_header_lookback</code>: number of lines above a detected
block to inspect for headers.</li>
<li>
<code>table_include_notes</code>: include trailing
<code>Note.</code> or <code>Source.</code> rows.</li>
<li>
<code>table_note_lookahead</code>: number of lines after a block to
inspect for note lines.</li>
<li>
<code>merge_across_pages</code>: if <code>TRUE</code>, continuation
blocks across adjacent pages are merged when they appear to be one
table.</li>
</ul>
<p>A practical tuning workflow:</p>
<ol style="list-style-type: decimal">
<li>If table blocks are fragmented, increase
<code>table_block_max_gap</code>.</li>
<li>If prose is incorrectly classified as table text, increase
<code>table_min_numeric_tokens</code> and/or
<code>table_min_digit_ratio</code>.</li>
<li>If table headers are missing, keep
<code>table_include_headers = TRUE</code> and increase
<code>table_header_lookback</code>.</li>
<li>If the same table is split across pages, set
<code>merge_across_pages = TRUE</code>.</li>
</ol>
</div>
</div>
<div class="section level2">
<h2 id="cross-page-sentence-conversion-optional">Cross-Page Sentence Conversion (Optional)<a class="anchor" aria-label="anchor" href="#cross-page-sentence-conversion-optional"></a>
</h2>
<p>If desired, sentence conversion can be done after pages are
concatenated. This has the benefit of allowing the sentence conversion
to work across pages and ensuring proper context and allowing for better
keyword proximity when sentences are split across page breaks.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res_cross_page</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/keyword_search.html">keyword_search</a></span><span class="op">(</span></span>
<span>  <span class="va">file</span>,</span>
<span>  keyword <span class="op">=</span> <span class="st">"fixed effects"</span>,</span>
<span>  path <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  split_pdf <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  split_method <span class="op">=</span> <span class="st">"coordinates"</span>,</span>
<span>  column_count <span class="op">=</span> <span class="st">"2"</span>,</span>
<span>  remove_section_headers <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  remove_page_headers <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  remove_page_footers <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  convert_sentence <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  concatenate_pages <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">res_cross_page</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 0 × 5</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 5 variables: keyword &lt;chr&gt;, page_num &lt;int&gt;, line_num &lt;int&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   line_text &lt;list&gt;, token_text &lt;list&gt;</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h2>
<p>For dense multi-column journal articles, a practical default is:</p>
<ol style="list-style-type: decimal">
<li><code>split_method = "coordinates"</code></li>
<li><code>column_count = "2"</code></li>
<li><code>remove_section_headers = TRUE</code></li>
<li><code>remove_page_headers = TRUE</code></li>
<li><code>remove_page_footers = TRUE</code></li>
<li><code>remove_repeated_furniture = TRUE</code></li>
<li><code>remove_captions = TRUE</code></li>
<li>
<code>table_mode = "remove"</code> for prose-focused keyword
search</li>
</ol>
<p>Use <code>table_mode = "only"</code> or
<code>extract_tables(..., output = "blocks")</code> when the goal is
specifically to analyze tables. If table headers are being missed, set
<code>table_include_headers = TRUE</code> and increase
<code>table_header_lookback</code>. If the table continues across pages,
use <code>merge_across_pages = TRUE</code>.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by <a href="https://brandonlebeau.org" class="external-link">Brandon LeBeau</a>.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

      </footer>
</div>






  </body>
</html>
